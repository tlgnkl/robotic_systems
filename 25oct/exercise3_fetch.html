<!DOCTYPE html>
<html>
<head>
    <title>Fetch API Practice</title>
    <style>
        .container { max-width: 900px; margin: 0 auto; padding: 20px; }
        .button { padding: 10px 20px; margin: 5px; border: none; border-radius: 5px; cursor: pointer; color: #fff; }
        .success { background-color: #4CAF50; }
        .info { background-color: #2196F3; }
        .error { background-color: #f44336; }
        .post { border: 1px solid #ddd; margin: 10px 0; padding: 15px; border-radius: 5px; }
        .post h3 { margin-top: 0; color: #333; }
        .loading { text-align: center; padding: 20px; font-style: italic; color: #666; }
        .post.error { background: #ffebee; border-color: #f44336; }
        .log { margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 5px; }
        .log-entry { margin: 5px 0; padding: 5px; border-left: 3px solid #ccc; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üåê –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å Fetch API</h1>
        
        <div class="controls">
            <button class="button success" id="getPostsBtn">–ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å—Ç—ã</button>
            <button class="button info" id="getUserBtn">–ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</button>
            <button class="button error" id="invalidUrlBtn">–ù–µ–≤–µ—Ä–Ω—ã–π URL (–æ—à–∏–±–∫–∞)</button>
            <button class="button" id="createPostBtn" style="background-color:#795548;">–°–æ–∑–¥–∞—Ç—å –ø–æ—Å—Ç (POST)</button>
        </div>
        
        <div id="loading" class="loading" style="display: none;">‚è≥ –ó–∞–≥—Ä—É–∑–∫–∞...</div>
        <div id="results"></div>
        <div class="log" id="log3"></div>
    </div>

    <script>
        const results = document.getElementById('results');
        const loading = document.getElementById('loading');
        const log3 = document.getElementById('log3');

        function addLog3(message, type = 'info') {
            const entry = document.createElement('div');
            entry.className = 'log-entry';
            entry.style.borderLeftColor = type === 'error' ? '#f44336' : 
                                        type === 'success' ? '#4CAF50' : '#2196F3';
            entry.textContent = `[${new Date().toLocaleTimeString()}] ${message}`;
            log3.appendChild(entry);
        }

        document.getElementById('getPostsBtn').addEventListener('click', async function() {
            addLog3('--- GET –ó–ê–ü–†–û–°: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–æ–≤ ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                addLog3('1. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º GET –∑–∞–ø—Ä–æ—Å –∫ API...');
                const response = await fetch('https://jsonplaceholder.typicode.com/posts?_limit=3');
                addLog3(`2. –ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç: Status ${response.status}, OK: ${response.ok}`);

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const posts = await response.json();
                addLog3(`3. –î–∞–Ω–Ω—ã–µ —Ä–∞—Å–ø–∞—Ä—Å–µ–Ω—ã, –ø–æ–ª—É—á–µ–Ω–æ ${posts.length} –ø–æ—Å—Ç–æ–≤`, 'success');

                results.innerHTML = posts.map(post => `
                    <div class="post">
                        <h3>üìù ${post.title}</h3>
                        <p>${post.body}</p>
                        <small>ID: ${post.id}, UserID: ${post.userId}</small>
                    </div>
                `).join('');
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">–û—à–∏–±–∫–∞: ${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });

        document.getElementById('getUserBtn').addEventListener('click', async function() {
            addLog3('--- GET –ó–ê–ü–†–û–°: –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                const userId = Math.floor(Math.random() * 10) + 1;
                addLog3(`1. –ó–∞–ø—Ä–∞—à–∏–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å ID: ${userId}`);

                const response = await fetch(`https://jsonplaceholder.typicode.com/users/${userId}`);

                if (!response.ok) {
                    throw new Error(`–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω! Status: ${response.status}`);
                }

                const user = await response.json();
                addLog3(`2. –ü–æ–ª—É—á–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ${user.name}`, 'success');

                results.innerHTML = `
                    <div class="post">
                        <h3>üë§ ${user.name}</h3>
                        <p><strong>Email:</strong> ${user.email}</p>
                        <p><strong>–¢–µ–ª–µ—Ñ–æ–Ω:</strong> ${user.phone}</p>
                        <p><strong>Website:</strong> ${user.website}</p>
                        <p><strong>–ö–æ–º–ø–∞–Ω–∏—è:</strong> ${user.company.name}</p>
                        <p><strong>–ì–æ—Ä–æ–¥:</strong> ${user.address.city}</p>
                    </div>
                `;
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });

        document.getElementById('invalidUrlBtn').addEventListener('click', async function() {
            addLog3('--- –û–®–ò–ë–ö–ê –°–ï–¢–ò: –ù–µ–≤–µ—Ä–Ω—ã–π URL ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                await fetch('https://invalid-url-that-does-not-exist.com/data');
            } catch (error) {
                addLog3(`‚ùå –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `
                    <div class="post error">
                        <h3>üåê –°–µ—Ç–µ–≤–∞—è –æ—à–∏–±–∫–∞</h3>
                        <p>${error.message}</p>
                        <p><small>Fetch –Ω–µ —Å–º–æ–≥ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∫ —É–∫–∞–∑–∞–Ω–Ω–æ–º—É URL</small></p>
                    </div>
                `;
            } finally {
                loading.style.display = 'none';
            }
        });

        document.getElementById('createPostBtn').addEventListener('click', async function() {
            addLog3('--- POST –ó–ê–ü–†–û–°: –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ ---');
            loading.style.display = 'block';
            results.innerHTML = '';
            
            try {
                const newPost = {
                    title: '–ù–æ–≤—ã–π –ø–æ—Å—Ç —Å Fetch API',
                    body: '–≠—Ç–æ—Ç –ø–æ—Å—Ç –±—ã–ª —Å–æ–∑–¥–∞–Ω —Å –ø–æ–º–æ—â—å—é JavaScript Fetch API',
                    userId: 1
                };

                addLog3('1. –ü–æ–¥–≥–æ—Ç–∞–≤–ª–∏–≤–∞–µ–º –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏...');

                const response = await fetch('https://jsonplaceholder.typicode.com/posts', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(newPost)
                });

                addLog3(`2. POST –∑–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω, —Å—Ç–∞—Ç—É—Å: ${response.status}`);

                if (!response.ok) {
                    throw new Error(`–û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –ø–æ—Å—Ç–∞! Status: ${response.status}`);
                }

                const createdPost = await response.json();
                addLog3(`3. –ü–æ—Å—Ç —Å–æ–∑–¥–∞–Ω! ID: ${createdPost.id}`, 'success');

                results.innerHTML = `
                    <div class="post">
                        <h3>‚úÖ –ü–æ—Å—Ç —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω!</h3>
                        <p><strong>ID:</strong> ${createdPost.id}</p>
                        <p><strong>–ó–∞–≥–æ–ª–æ–≤–æ–∫:</strong> ${createdPost.title}</p>
                        <p><strong>–¢–µ–∫—Å—Ç:</strong> ${createdPost.body}</p>
                        <p><strong>UserID:</strong> ${createdPost.userId}</p>
                        <p><em>–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: JSONPlaceholder –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ, –Ω–æ –∏–º–∏—Ç–∏—Ä—É–µ—Ç —É—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç</em></p>
                    </div>
                `;
            } catch (error) {
                addLog3(`‚ùå –û—à–∏–±–∫–∞: ${error.message}`, 'error');
                results.innerHTML = `<div class="post error">${error.message}</div>`;
            } finally {
                loading.style.display = 'none';
            }
        });
    </script>
</body>
</html>
